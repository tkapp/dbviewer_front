<!DOCTYPE html>
<html lang="ja">
<head>
  <title>dbv new</title>
  <meta charset="utf-8">
  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  <script>
    var create = function() {
	  console.log($("#dbms").serialize());
	  $.ajax({
        url: "/data/add",
        type: "POST",
        data: $("#dbms").serialize()
	  }).done(function() {
	    location.href="./rc.html";
	  }).fail(function(e) {
	    console.log(e);
		var json = $.parseJSON(e.responseText);
	    $("#message").text(json.error);
	  });
	};
  </script>
</head>
<body>

<form id="dbms" action="./data/add">
  <div id="message"></div>
  <table>
    <tr>
	  <th>name</th>
	  <td><input type="text" name="name"></td>
	</tr>
    <tr>
	  <th>DBMS</th>
	  <td>
	    <select name="dbms">
		  <option value="mysql">MySQL</option>
		</select>
	  </td>
	</tr>
    <tr>
	  <th>host</th>
	  <td><input type="text" name="host"></td>
	</tr>
    <tr>
	  <th>port</th>
	  <td><input type="text" name="port"></td>
	</tr>
    <tr>
	  <th>schema</th>
	  <td><input type="text" name="schema"></td>
	</tr>
    <tr>
	  <th>user</th>
	  <td><input type="text" name="user"></td>
	</tr>
    <tr>
	  <th>password</th>
	  <td><input type="text" name="password"></td>
	</tr>
    <tr>
	  <th>charset</th>
	  <td><input type="text" name="charset" value="utf8"></td>
	</tr>
  </table>
  <input type="button" onClick="javascript:create()" value="submit">

</form>

</body>
</html>